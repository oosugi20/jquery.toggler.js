/*! jquery.toggler.js (git://github.com/oosugi20/jquery.toggler.js.git)
 * lastupdate: 2014-09-01
 * version: 0.1.4
 * author: Makoto OOSUGI <oosugi20@gmail.com>
 * License: MIT
 */
!function(a,b){"use strict";var c,d=a(b),e="Toggler",f="toggler",g={openedClassName:"opened",closedClassName:"closed",autoClose:!1,effect:"slide",easing:"swing",adjustPosition:!1,openSpeed:250,closeSpeed:100,enableMouseEnter:!1};c=function(b,c){return this.el=b,this.options=a.extend({},g,c),this.$el=a(b),this.$contents=this.$el.find("[data-toggler-contents]"),this.$btn=this.$el.find("[data-toggler-btn]"),this},function(b){b._eventify=function(){var b=this,c=this.options.enableMouseEnter?"click mouseenter":"click";return this.$el.on(c,"[data-toggler-btn]",function(c){var d=a(this),e=d.attr("data-toggler-btn"),f=d.attr("data-toggler-target");b[e](f),"toggle"===e&&b.refreshLabel(),c.preventDefault()}),this},b.init=function(){var b=this,c=this.$el.attr("class"),d=new RegExp(this.options.openedClassName+" |"+this.options.openedClassName+"$"),e=d.test(c);return e?(this.$contents.show(),this.$contents.data("toggler:state","opened")):this.$contents.each(function(){var d=a(this),e=d.attr("data-toggler-contents"),f=new RegExp(b.options.openedClassName+"-"+e+" |"+b.options.openedClassName+"-"+e+"$"),g=f.test(c);g?(d.show(),d.data("toggler:state","opened")):(d.hide(),d.data("toggler:state","closed"))}),this.updateStateClass(),this._eventify(),this},b.hasOpened=function(){var b=this.$contents.filter(function(){return"opened"===a(this).data("toggler:state")});return b.length?!0:!1},b.updateStateClass=function(){var b=this.options.openedClassName,c=this.options.closedClassName,d=this;return this.$contents.each(function(){var e=a(this).attr("data-toggler-contents");"opened"===a.data(this,"toggler:state")&&(d.$el.addClass(b+"-"+e),d.$el.removeClass(c+"-"+e)),"closed"===a.data(this,"toggler:state")&&(d.$el.addClass(c+"-"+e),d.$el.removeClass(b+"-"+e))}),this.hasOpened()?(this.$el.addClass(b),this.$el.removeClass(c)):(this.$el.addClass(c),this.$el.removeClass(b)),this},b.filterContents=function(a){var b;return b=a?this.$contents.filter("[data-toggler-contents="+a+"]"):this.$contents},b.open=function(b){var c=this,e=this.options.effect,f=this.options.openSpeed,g=this.options.easing,h=this.options.autoClose,i=this.filterContents(b),j=this.$contents.not(i),k=a.Deferred();if("opened"!==i.data("toggler:state")){if(this.$el.trigger("toggler:beforeopen"),j.data("toggler:state","closed"),h)switch(e){case"fade":j.stop(!1,!0).fadeOut({duration:f,easing:g});break;case"slide":j.stop(!1,!0).slideUp({duration:f,easing:g});break;case"none":j.stop(!1,!0).hide();break;default:j.stop(!1,!0).slideUp({duration:f,easing:g})}switch(i.data("toggler:state","opened"),this.updateStateClass(),this._scrollTop=d.scrollTop(),i.hide(),e){case"fade":i.stop(!1,!0).fadeIn({duration:f,easing:g,complete:k.resolve});break;case"slide":i.stop(!1,!0).slideDown({duration:f,easing:g,complete:k.resolve});break;case"none":i.stop(!1,!0).show(),k.resolve();break;default:i.stop(!1,!0).slideDown({duration:f,easing:g,complete:k.resolve})}k.done(function(){c.$el.trigger("toggler:afteropen")})}return this},b.close=function(a){var b=this.options.effect,c=this.options.closeSpeed,e=this.options.easing,f=this.options.adjustPosition,g=a?this.filterContents(a):this.$contents;if("closed"!==g.data("toggler:state")){switch(this.$el.trigger("toggler:beforeclose"),g.data("toggler:state","closed"),this.updateStateClass(),g.show(),b){case"fade":g.stop(!1,!0).fadeOut({duration:c,easing:e});break;case"slide":g.stop(!1,!0).slideUp({duration:c,easing:e});break;case"none":g.stop(!1,!0).hide();break;default:g.stop(!1,!0).slideUp({duration:c,easing:e})}f&&(this._scrollTop=this._scrollTop||this.$el.offset().top-d.height()/2,d.scrollTop(this._scrollTop)),this.$el.trigger("toggler:afterclose")}return this},b.toggle=function(a){var b=this.filterContents(a),c=b.data("toggler:state");switch(c){case"opened":this.close(a);break;case"closed":this.open(a);break;case"animating":}return this},b.refreshLabel=function(){var a=this.$btn.filter("[data-toggler-togglelabel]"),b=a.attr("data-toggler-togglelabel")||a.text(),c=a.text();return a.attr("data-toggler-togglelabel",c),a.text(b),this}}(c.prototype),a.fn[f]=function(b){return this.each(function(){var d;d=new c(this,b),a.data(this,f,d),d.init()})},a[e]=c}(jQuery,this);